<meta name="viewport" content="initial-scale=1.0, minimum-scale=0.25">
<style>
body {
    font-family: sans-serif;
    font-size: 1em;
}
td {
    padding: 4px;
}
@media (prefers-color-scheme: dark) {
    body {
        background-color: #121212;
        color: #888;
    }
}
</style>
<title>HN Polls</title>
<div id=app>Loading...</div>
<br>
<div>Source code on <a href='https://github.com/gabrielsroka/gabrielsroka.github.io/blob/master/hnpolls.html' target='_blank'>GitHub</a></div>
<div>Using the <a href='https://hn.algolia.com/api' target='_blank'>HN Search API</a></div>
<script>
(async function() {
    // see https://hn.algolia.com/api
    const r = await fetch('https://hn.algolia.com/api/v1/search_by_date?tags=poll');
    const polls = await r.json();
    app.innerHTML = '<table><tr><th>Created At<th>Title<th>Author<th>Points<th>Num Comments' + 
        polls.hits.map(p => `<tr><td>${p.created_at}<td><a href='https://gabrielsroka.github.io/hnpoll.html?id=${p.objectID}' target=_blank>${p.title}</a><td>${p.author}<td align=right>${p.points}<td align=right>${p.num_comments}`).join('') +
        '</table>';
})();
</script>
