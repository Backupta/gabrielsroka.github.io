<!doctype html>
<html>
<head>
<title>5 investing rules</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="//code.jquery.com/jquery-git.js" type="text/javascript"></script>
<script type="text/javascript">
function update() {
    var age = $("#age").val() * 1;
    var saved = $("#saved").val() * 1;
    var returnPercent = $("#returnPercent").val() * 1;

    var years = 25;

    var savedPerYear = saved * 365;
    var returned = 0;
    var balance = 0;

    var table = "";

    for (var i = age; i <= age + years; i++) {
        returned = (savedPerYear + balance) * returnPercent / 100;
        balance += savedPerYear + returned;

        table += "<tr><td>" + i + 
            "<td>$" + format(savedPerYear) + 
            "<td>$" + format(returned) + 
            "<td>$" + format(balance);
    }

	$("#results").html("You saved $" + format(balance) + " by age " + (age + years) + ".<br><br>" + 
    	"<table><tr><th>Age<th>$" + saved + "/day<th>" + returnPercent + "% Return<th>Balance" + table + "</table>");
}
	
function format(i) {
    var s = Math.round(i).toLocaleString();
    var a = 1000;
    if (a.toLocaleString().length == 4) { // no punctuation
        return addCommas(Math.round(i));
    } else {
        return s;
    }
}
    
function addCommas(i) {
    var ts = i.toString(), s = "";
    for (var i = 1; i <= ts.length; i++) {
        s = ts.charAt(ts.length - i) + s;
        if (i < ts.length && i % 3 == 0) {
            s = "," + s;
        }
    }
    return s;
}

$(function () {
// TODO hide slider in IE because it doesn't work.
	update();
	$("input").blur(update);
    $("#age").blur(function () {
    	$("#ageRange").val($(this).val());
    }).select();
    $("#ageRange").on("input", function () {
    	$("#age").val($(this).val());
        update();
    });
});
</script>
<style type="text/css">
body {
    font-family: 'Source Sans Pro', sans-serif;
    font-size: 11pt;
    background-color: white;
}

table {
    border-collapse: collapse;
}

td, th {
    border: 1px solid black;
    padding: 6px;
}
td,input {
    text-align: right;
}
input {
    width: 75px;
}
</style>
</head>
<body>
See <a href="https://chrisreining.com/5-investing-rules/" target=_top>https://chrisreining.com/5-investing-rules/</a><br><br>
<table>
<!-- maybe use sliders type=range instead of/in addition to these. -->
<tr><td>Age</td><td><input id=age type=number pattern="[0-9]*" value=25>&nbsp;&nbsp;&nbsp;</td><td><input id=ageRange type=range value=25></td></tr>
<tr><td>Saved</td><td>$<input id=saved type=number pattern="[0-9]*" value=10>&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>Return</td><td><input id=returnPercent type=number pattern="[0-9]*" value=7>%</td></tr>
</table>
<br>
<div id=results></div>
</body>
</html>
