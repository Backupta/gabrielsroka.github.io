<!doctype html>
<html>
<head>
<title>Millennials</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="//code.jquery.com/jquery-git.js" type="text/javascript"></script>
<script type="text/javascript">
function update() {
    var age = $("#age").val() * 1;
    var income = $("#income").val() * 1;
    var incomeGrowthPercent = $("#incomeGrowthPercent").val() * 1;
    var savedPercent = $("#savedPercent").val() * 1;
    var returnPercent = $("#returnPercent").val() * 1;
    var goal = $("#goal").val() * 1; // maybe this should be: (passive income) spend / 0.04 (safe withdrawal rate)

    var saved = 0;
    var returned = 0;

    var table = "";
    var message = "You did not reach your goal. Try changing the numbers.";

    for (var i = age; i < 100; i++) {
        saved = income * savedPercent / 100;
        returned = (returned + saved) * (1 + returnPercent / 100);

        table += "<tr><td>" + age + 
            "<td>$" + Math.round(income).toLocaleString() + 
            "<td>$" + Math.round(saved).toLocaleString() + 
            "<td>$" + Math.round(returned).toLocaleString();

        if (returned >= goal) {
        	message = "You should reach your goal by age " + age + ".";
        	break;
        }

        age++;
        income *= 1 + incomeGrowthPercent / 100;
    }

    $("#results").html(message + "<br><br><table><tr><th>Age<th>Income<th>" + 
    savedPercent + "% Saved<th>" + returnPercent + "% Return" + table + "</table>");
}

$(function () {
	// TODO hide slider in IE because it doesn't work.
    update();
    $("input").blur(update);
    $("#age").blur(function () {
        $("#ageRange").val($(this).val());
    }).select();
    $("#ageRange").on("input", function () {
        $("#age").val($(this).val());
        update();
    });
});
</script>
<style type="text/css">
body {
    font-family: 'Source Sans Pro', sans-serif;
    font-size: 11pt;
    background-color: white;
}

table {
    border-collapse: collapse;
}

td, th {
    border: 1px solid black;
    padding: 6px;
}
td,input {
    text-align: right;
}
input {
    width: 75px;
}
</style>
</head>
<body>
See <a href="https://chrisreining.com/millennials/" target=_top>https://chrisreining.com/millennials/</a><br><br>
<table>
<!-- maybe use sliders type=range instead of/in addition to these. -->
<tr><td>Age</td><td><input id=age value=22>&nbsp;&nbsp;&nbsp;</td><td><input id=ageRange type=range value=22></td></tr>
<tr><td>Income</td><td>$<input id=income value=45500>&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>Annual Raise</td><td><input id=incomeGrowthPercent value=3>%</td></tr>
<tr><td>Saved</td><td><input id=savedPercent value=10>%</td></tr>
<tr><td>Return</td><td><input id=returnPercent value=7>%</td></tr>
<tr><td>Goal</td><td>$<input id=goal value=1000000>&nbsp;&nbsp;&nbsp;</td></tr>
</table>
<br>
<div id=results></div>
</body>
</html>
