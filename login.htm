<!doctype html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Sign in</title>
<script src="https://global.oktacdn.com/okta-signin-widget/3.2.0/js/okta-sign-in.min.js" type="text/javascript"></script>
<link href="https://global.oktacdn.com/okta-signin-widget/3.2.0/css/okta-sign-in.min.css" type="text/css" rel="stylesheet" />
<style>
#login-bg-image {
    background-image: url('https://picography.co/wp-content/uploads/2018/09/picography-desert-road-mountain-sunset-small-768x512.jpg'); 
    top: 0; 
    bottom: 0; 
    left: 0; 
    right: 0;
    position: fixed;
    background-position: 50%;
    background-size: cover;
}
</style>
</head>
<body>
<br>
<div id="login-bg-image">
<div id="osw-container"></div>
</div>
<script>
// see https://developer.okta.com/code/javascript/okta_sign-in_widget
//     https://github.com/okta/okta-signin-widget

const baseUrl = "https://gsroka-neto.oktapreview.com";

var config = {
    baseUrl: baseUrl,
    logo: "https://www.dmv.ca.gov/imageserver/v5/images/dmv_logo.svg"
};
var signIn = new OktaSignIn(config);
if (location.search == "?signout") {
    signIn.authClient.signOut()
    .then(function () {
        location.href = "login.htm";
    }).fail(function () {
        location.href = "login.htm";
    });
} else {
    signIn.renderEl(
        {el: '#osw-container'},
        function success(res) {
            if (res.status == "SUCCESS") {
                console.log("User %s succesfully authenticated %o", res.user.profile.login, res.user);
                res.session.setCookieAndRedirect(location.origin + "/home.htm");
            } else {
                console.log(res.status);
            }
        },
        function error(err) {
            console.log(err);
        }
    );
}
</script>
</body>
</html>
