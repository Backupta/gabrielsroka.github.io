aBool: <input id=aBool type=checkbox><br><br>
<button id=saveUser>Save</button><br><br>
<div id=result></div>
<script>
// For this to work, enable CORS in Okta: Security > API > Trusted Origins > Add Origin > CORS.
const url = 'https://gsroka-neto.oktapreview.com/api/v1/users/me';

onload = () => user('get');
saveUser.onclick = () => user('post');

async function user(method) {
    result.innerHTML = method + 'ing...';
    const response = await fetch(url, {
        method,
        body: method == 'post' ? JSON.stringify({profile: {aBool: aBool.checked}}) : undefined,
        headers: {'content-type': 'application/json'},
        credentials: 'include' // for CORS
    });
    const body = await response.json();
    if (response.ok) {
        aBool.checked = body.profile.aBool;
        result.innerHTML = 'aBool = ' + body.profile.aBool;
    } else {
        result.innerHTML = 'error = ' + body.errorSummary;
    }
}
</script>
