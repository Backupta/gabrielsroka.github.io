<!doctype html>
<html lang="en-us">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>My Apps</title>
  <link href="https://ok3static.oktacdn.com/assets/css/widgets/chosen.a7aa2f61c6950df36987b8273c15a6be.css" type="text/css" rel="stylesheet"/>
  <link href="https://ok3static.oktacdn.com/assets/css/enduser/enduser.be9c75cd7f709dbb05ac1ab439ea9ec4.css" type="text/css" rel="stylesheet"/>
  <link href="https://ok3static.oktacdn.com/assets/css/widgets/jquery.qtip.188d7d3c1fd4644f3496390bc187bd08.css" type="text/css" rel="stylesheet"/>
  </head>
<body>
<div id="links"></div>
<script>
var baseUrl = 'https://gsroka-neto.oktapreview.com';
var init = {credentials: 'include'};
// var init = {mode: 'cors'}; // this didn't seem to work.

fetch(`${baseUrl}/api/v1/users/me/appLinks`, init)
.then(response => response.json())
.then(links => {
    links.sort((link1, link2) => link1.sortOrder < link2.sortOrder ? -1 : 1);
    var s = "<ul>";
    links.forEach(link => s += `<li class='app-button-wrapper'>
        <a href='${link.linkUrl}' target='_blank' class='app-button'><img src='${link.logoUrl}' style='visibility: visible' class='logo'/></a>
        <p class='app-button-name'>${link.label}`);
    s += "</ul>";
    document.getElementById("links").innerHTML = s;
});
</script>
</body>
</html>
