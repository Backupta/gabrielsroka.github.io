<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Misty Programming Language: Primordial Functions</title>
<link rel="stylesheet" href="style.css" type="text/css">
</head>
<body>
    <div class=mistyhead><a href="https://www.crockford.com/misty">Misty Programming Language:</a></div>
    <h1>Primordial Functions</h1>
<p align="left">These are functions that are predefined in the language that are available to all modules and actors. The names of the functions are not reserved.</p>
<h2 align="left" id=creator>Creator Functions</h2>
<p align="left">The creator functions are used to make new objects. Some of them can take various types. All of these functions can fail if their inputs are not suitable.</p>
<h3 align="left" id="array">Array</h3>
<h4>array(<var>number</var>)</h4>
<p>Make an array. All of the elements are initialized to <code>null</code>.</p>
<p><var>number</var> is a non-negative integer, the intended length of the new array.</p>
<h4>array(<var>number</var>, <var>initial_value</var>)</h4>
<p>Make an array. All of the elements are initialized to <var>initial_value</var>.</p>
<p><var>number</var> is a non-negative integer, the intended length of the new array.</p>
<p> If <var>initial_value</var> is a function, then the function is called for each element to produce initialization values. If the function has an arity of 1 or more, it will be passed the element number.</p>
<h4>array(<var>array</var>, <var>function</var>)</h4>
<p>Map. Call the <var>function</var> with each element of a the <var>array</var>, collecting the return values in a new array. The function is passed each original element. If the arity is 2 or more, it will also be passed the element number.</p>
<h4>array(<var>array</var>, <var>another_array</var>)</h4>
<p>Concat. Produce a new array that concatenates the <var>array</var> and <var>another_array</var>.</p>
<h4>array(<var>array</var>, <var>from</var>, <var>to</var>)</h4>
<p>Make a mutable copy of all or part of an <var>array</var>.</p>
<p><var>array</var>: the array to copy</p>
<p><var>from</var>: the position at which to start copying. Default: <code>0</code>, the beginning. If negative, add <code>length(<var>array</var>)</code>.</p>
<p><var>to</var>: the position at which to stop copying. Default: <code>length(<var>array</var>)</code>, the end. If negative, add <code>length(<var>array</var>)</code>.</p>
<p>If, after adjustment,  <var>from</var> and <var>to</var> are not valid integers in the proper range, then it fails. <var>from</var> must be positive and less than or equal to <var>to</var>. <var>to</var> must be less than or equal to <code>length(<var>array</var>)</code>.</p>
<h4><code>array(<var>record</var>)</code></h4>
<p>Make an array containing all of the
text keys in the <var>record</var>. The keys are not guaranteed
    to be in any particular order. Stone record keys are not included.</p>
<h4>array(<var>text</var>)</h4>
<p>Split into composite characters. A composite character is a Unicode character and its succeeding combining characters, if any.</p>
<h4>array(<var>text</var>, <var>separator</var>)</h4>
<p>Split the text into an array of subtexts. The <var>separator</var>  can be a text or pattern. </p>
<h4>array(<var>text</var>, <var>length</var>)</h4>
<p>Dice the text into an array of subtexts of a given <var>length</var>.</p>
<h3 align="left" id="blob">Blob</h3>
<h4>blob()</h4>
<p>Make a new empty blob.</p>
<h4>blob(<var>capacity</var>)</h4>
<p>Make a new empty blob with a specific initial capacity in bits.</p>
<h4>blob(<var>length</var>, <var>random</var>)</h4>
<p>Make a new blob of a given <var>length</var> whose content is random. The <var>random</var> parameter is a random generator function.</p>
<h4>blob(<var>blob</var>, <var>from</var>, <var>to</var>)</h4>
<p>Make a copy of all or part of a blob. The default of <var>from</var> is <code>0</code>. The default of <var>to</var> is the <code>length(<var>blob</var>).</code></p>
<h3 align="left" id="logical">Logical</h3>
<h4 align="left">logical(<var>value</var>)</h4>
<pre align="left">if <var>value</var> = 0 \/ <var>value</var> = false \/ <var>value</var> = "false"
    return false
if <var>value</var> = 1 \/ <var>value</var> = true \/ <var>value</var> = "true"
    return true
fail
</pre>
<h3 align="left" id="number">Number</h3>
<h4>number(<var>logical</var>)</h4>
<p>The result will be <code>1</code> or <code>0</code>.</p>
<h4><code>number(<var>number</var>)</code></h4>
<p>The <var>number</var> is returned.</p>
<h4>number(<var>text</var>, <var>radix</var>)</h4>
<p>Convert a <var>text</var> to a number. The optional <var>radix</var> is an integer between <code>2</code> and <code>37</code>. (<a href="https://www.crockford.com/base32.html">See Base 32.</a>) The default <var>radix</var> is 10.</p>
<h4><var></var><code>number</code>(<var>text</var>, <var>format</var>)</h4>
<table>
    <tr>
        <th><var>format</var></th>
        <th>radix</th>
        <th>separator</th>
        <th>decimal point</th>
    </tr>
    <tr>
        <td><code>&quot;&quot;</code></td>
        <td rowspan="8">10</td>
        <td rowspan="2" valign="top">&nbsp;</td>
        <td rowspan="5" valign="top"><code>.</code><small>period</small></td>
    </tr>
    <tr>
        <td><code>&quot;n&quot;</code></td>
    </tr>
    <tr>
        <td><code>&quot;u&quot;</code></td>
        <td valign="top"><code>_</code><small>underbar</small></td>
    </tr>
    <tr>
        <td><code>&quot;d&quot;</code></td>
        <td><code>,</code><small>comma</small></td>
    </tr>
    <tr>
        <td><code>&quot;s&quot;</code></td>
        <td><code>&nbsp;</code><small>space</small></td>
    </tr>
    <tr>
        <td><code>&quot;v&quot;</code></td>
        <td><code>.</code><small>period</small></td>
        <td><code>,</code><small>comma</small></td>
    </tr>
    <tr>
        <td><code>&quot;l&quot;</code></td>
        <td colspan="2">dependent on locale</td>
    </tr>
    <tr>
        <td><code>&quot;i&quot;</code></td>
        <td rowspan="5" valign="top"><code>_</code><small>underbar</small></td>
        <td rowspan="6"></td>
    </tr>
    <tr>
        <td><code>&quot;b&quot;</code></td>
        <td>2</td>
    </tr>
    <tr>
        <td><code>&quot;o&quot;</code></td>
        <td>8</td>
    </tr>
    <tr>
        <td><code>&quot;h&quot;</code></td>
        <td>16</td>
    </tr>
    <tr>
        <td><code>&quot;t&quot;</code></td>
        <td><a href="http://www.crockford.com/wrmg/base32.html">32</a></td>
    </tr>
    <tr>
        <td><code>&quot;j&quot;</code></td>
        <td colspan=2><code>0x</code>- base&nbsp;16<br>
            <code>0o</code>- base&nbsp;8<br>
            <code>0b</code>- base&nbsp;2<br>
            otherwise base&nbsp;10</td>
    </tr>
</table>
<p>The number function converts a text into a number.</p>
<p> If it is unable to (possibly because of a formatting error), it returns <code>null</code>. The  <var>format</var> character determines
    how the text is interpreted. If the format is not one of those listed,
    then <code>null</code> is returned.</p>
<p>Examples:</p>
<pre style="clear: both;">set result: number(&quot;123,456,789.10&quot;, &quot;d&quot;)    # result is 123456789.1
set result: number(&quot;123.456.789,10&quot;, &quot;v&quot;)    # result is 123456789.1
set result: number(&quot;123.456.789,10&quot;, &quot;d&quot;)    # result is null
set result: number(&quot;123 456 789.10&quot;, &quot;s&quot;)    # result is 123456789.1
set result: number(&quot;12.350&quot;)                 # result is 12.35
set result: number(&quot;12.350&quot;, &quot;v&quot;)            # result is 12350
set result: number(&quot;12.350&quot;, &quot;i&quot;)            # result is null
set result: number(&quot;666&quot;)                    # result is 666
set result: number(&quot;666&quot;, &quot;o&quot;)               # result is 438
set result: number(&quot;666&quot;, &quot;h&quot;)               # result is 1638
set result: number(&quot;666&quot;, &quot;t&quot;)               # result is 6342
set result: number(&quot;0666&quot;)                   # result is 666
</pre>
<h3 align="left" id="record">Record</h3>
<h4>record(<var>record</var>)</h4>
<p>Copy.</p>
<h4>record(<var>record</var>, <var>array_of_keys</var>)</h4>
<p>Select. Make a new record containing only the fields that are named by the <var>array_of_keys</var>.</p>
<h4>record(<var>array_of_keys</var>)</h4>
<p>Set. Make a record using the array as the source of the keys. Each field value is <code>true</code>.</p>
<h4>record(<var>array_of_keys</var>, <var>value</var>)</h4>
<p>Value Set. Make a record using the array as the source of the keys. Each field value is <var>value</var>.</p>
<h4>record(<var>array_of_keys</var>, <var>function</var>)</h4>
<p>Functional value Set. Make a record using the array as the source of the keys. The <var>function</var> is called for each key, yielding the field values.</p>
<h3 align="left" id="text">Text</h3>
<h4>text(<var>array</var>)</h4>
<p>Convert an array of codepoints into a text.</p>
<h4>text(<var>array</var>, <var>separator</var>)</h4>
<p>Join an array of texts into a single text. The <var>separator</var> text is inserted between each piece. The default is empty text.</p>
<h4>text(<var>number</var>, <var>radix</var>)</h4>
<p>Convert a number to text.  The optional <var>radix</var> is an integer <code> 2</code> and <code>37</code>. (<a href="https://www.crockford.com/base32.html">See Base 32.</a>) The default <var>radix</var> is 10.</p>
<h4><code>text(<var>number</var>, </code><var>format</var><code>) </code></h4>
<blockquote style="background-color: white; border: 2pt solid black; float: right; margin-right: 0; padding-right: 2em;">
<p>The format of the <var>format</var> text is</p>
<p class="rule">
format
    format_separation format_style format_places
</p>
<p class="rule">
format_separation
    <code>""</code>
    digit
</p>
<p class="rule">
format_style
    <code>'b'</code>
    <code>'e'</code>
    <code>'h'</code>
    <code>'i'</code>
    <code>'j'</code>
    <code>'n'</code>
    <code>'l'</code>
    <code>'o'</code>
    <code>'s'</code>
    <code>'t'</code>
    <code>'u'</code>
    <code>'v'</code>
</p>
<p class="rule">
format_places
    digit digit
    digit
</p>
</blockquote>
<p> The <code>text</code> method converts a <var>number</var> to a text.
    It takes a <var>format</var> text parameter. </p>
<p>A <var>format</var> text contains a style letter that controls how a text is
    produced from the number.   It is optionally preceded by a separation digit,
    and optionally followed by a places digit. There are real styles and integer
    styles. If the <var>format</var> parameter is not a proper format text,
    then <code>null</code> will be returned. </p>
<p>Separation is a character that is placed between digits to improve readability.
    If separation is 0, then there is no separation. If separation is 3, then
    a character will be inserted before the quadrillions, trillions, billions, millions,
    and thousands. </p>
<p>Places is the number of places to display after the decimal point (in
    real styles) or the minimum number of digits to display with zero-fill
    (in integer styles). If places is 0, then as many digits as necessary
    are displayed. Places can be zero or one or two digits.</p>
<table style="clear: both;">
    <tbody>
        <tr>
            <th colspan="2">real <var>style</var></th>
            <th align="center">default<br>
                separation</th>
            <th align="center">default<br>
                places</th>
            <th align="center">decimal<br>
                point</th>
            <th align="center">separator</th>
        </tr>
        <tr>
            <td><code>e</code></td>
            <td><i>exponential</i></td>
            <td rowspan="2" align="center" valign="top">0</td>
            <td rowspan="4" align="center" valign="top">0</td>
            <td rowspan="5" align="center" valign="top"><code>.</code><small>period</small></td>
            <td rowspan="2" align="center" valign="top">&nbsp;</td>
        </tr>
        <tr>
            <td><code>n</code></td>
            <td><i>number</i></td>
        </tr>
        <tr>
            <td><code>s</code></td>
            <td><i>space</i></td>
            <td rowspan="4" align="center" valign="top">3</td>
            <td valign="top"><code>&nbsp;</code><small>space</small></td>
        </tr>
        <tr>
            <td><code>u</code></td>
            <td><i>underbar</i></td>
            <td valign="top"><code>_</code><small>underbar</small></td>
        </tr>
        <tr>
            <td><code>d</code></td>
            <td><i>decimal</i></td>
            <td rowspan="2" align="center" valign="top">2</td>
            <td><code>,</code><small>comma</small></td>
        </tr>
        <tr>
            <td><code>v</code></td>
            <td><i>comma</i></td>
            <td align="center"><code>,</code><small>comma</small></td>
            <td><code>.</code><small>period</small></td>
        </tr>
        <tr>
            <td><code>l</code></td>
            <td><i>locale</i></td>
            <td colspan="4" align="center">determined by the locale</td>
        </tr>
    </tbody>
</table>
<p>The real <var>format</var> options are </p>
<blockquote>
    <p><code>&quot;e&quot;</code>  uses scientific notation. One digit will be placed before the decimal point, and all of the remaining digits after, followed by <code>e</code> and the exponent.</p>
    <p><code>&quot;n&quot;</code>  uses <code>.</code><small>period</small> as the decimal point and no separator. It is the format used for numbers in Misty source
        programs and JSON. Scientific notation will be used if the number value is extreme.</p>
    <p><code>&quot;s&quot;</code>  uses <code>.</code><small>period</small> as the decimal point and a <i>space</i> as the separator.</p>
<p><code>&quot;u&quot;</code>  uses <code>.</code><small>period</small> as the decimal point and <code>_</code><small>underbar</small> as the separator.</p>
    <p><code>&quot;d&quot;</code>  uses <code>.</code><small>period</small> as the decimal point and <code>,</code><small>comma</small> as the separator.</p>
    <p><code>&quot;c&quot;</code>  uses <code>,</code><small>comma</small> as the decimal point and <code>.</code><small>period</small> as the separator.</p>
    <p><code>&quot;l&quot;</code>  depends on the locale to determine the characters
        to use as the decimal point and the separator.</p>
</blockquote>
<p>The optional <var>places</var> determines the number of digits after
    the decimal point. The default is determined by the <var>format</var>, as seen in the table.
    If the <var>places</var> is 0, then the number of decimal places will
    be the fewest to exactly display the number without truncating. If the <var>places</var> is larger, then the field will be padded if necessary with trailing <code>0</code>. </p>
<p>The optional <var>separation</var> determines the spacing of the separator
    character. For example, to place a separator between billions, millions,
    and thousands (that is, every 3 digits) then <var>separation</var> should
    be <code>3</code>. If <var>separation</var> is zero, then there is no
    separation. The default is determined by the <var>style</var>.</p>
<table style="clear: both;">
    <tr>
        <th colspan="2">integer style</th>
        <th>base</th>
        <th align="center" valign="top">default<br>
            separation</th>
        <th align="center" valign="top">minimum<br>
            places</th>
        <th align="center" valign="top">separator</th>
    </tr>
    <tr>
        <td><code>i</code></td>
        <td><i>integer </i></td>
        <td>10</td>
        <td rowspan="5" valign="top" align="center">0</td>
        <td rowspan="5" valign="top" align="center">1</td>
        <td rowspan="5" valign="top"><code>_</code><small>underbar</small></td>
    </tr>
    <tr>
        <td><code>b</code></td>
        <td><i>binary</i></td>
        <td>2</td>
    </tr>
    <tr>
        <td><code>o</code></td>
        <td><i>octal </i></td>
        <td>8</td>
    </tr>
    <tr>
        <td><code>h</code></td>
        <td><i>hexadecimal </i></td>
        <td>16</td>
    </tr>
    <tr>

        <td><code>t</code></td>
        <td><i><a href="http://www.crockford.com/base32.html">Base32</a></i></td>
        <td> 32</td>
    </tr>
</table>
<p>The integer styles first <code>trunc</code> the <var>number</var>. The fractional part of the <var>number</var> is ignored. The separation character is <code>_</code><small>underbar</small>.</p>
<p>The optional <var>places</var> determines the minimum number of digits
    to show. More leading <code>0</code> may be shown if necessary. The default is determined
    by the <var>format</var>, as seen in the table.</p>
<p>The optional <var>separation</var> determines the spacing of the separator
    character. For example, to place a separator between billions, millions,
    and thousands (that is, every 3 digits) then <var>separation</var> should
    be <code>3</code>. If <var>separation</var> is zero, then there is no
    separation. The default is determined by the <var>format</var>, as seen
    in the table.</p>
<p>Examples:</p>
<pre>
def data: 0123456789.1
set result: text(data)            # result is "123456789.1"
set result: text(data, "n")       # result is "123456789.1"
set result: text(data, "3s4")     # result is "123 456 789.1000"
set result: text(data, "s")       # result is "123 456 789.1"
set result: text(data, "d2")      # result is "123,456,789.10"
set result: text(data, "4d0")     # result is "1,2345,6789.1"
set result: text(data, "v2")      # result is "123.456.789,10"
set result: text(data, "e")       # result is "1.234567891e8"
set result: text(data, "e4")      # result is "1.2345e8"
set result: text(data, "i")       # result is "123456789"
set result: text(data, "8b")      # result is "111_01011011_11001101_00010101"
set result: text(data, "o")       # result is "726746425"
set result: text(data, "h")       # result is "75BCD15"
set result: text(data, "t")       # result is "3NQK8N"
set result: text(12)              # result is &quot;12&quot;
set result: text(12, 8)           # result is &quot;14&quot;
set result: text(12, 32)          # result is &quot;C&quot;
set result: text(12, &quot;4b8&quot;)       # result is &quot;0000_1100&quot;
set result: text(12, &quot;o3&quot;)        # result is &quot;014&quot;
set result: text(12, &quot;h4&quot;)        # result is &quot;000C&quot;
set result: text(12, &quot;t2&quot;)        # result is &quot;0C&quot;
</pre>
<h4>text(<var>text</var>)</h4>
<p>Return the text.</p>
<h4>text(<var>text</var>, <var>from</var>, <var>to</var>)</h4>
<p>Make a copy of part of a text. </p>
<p><var>text</var>: the text to copy.</p>
<p><var>from</var>: the position at which to start copying. Default: <code>0</code>, the beginning. If negative, add <code>length(<var>text</var>)</code>.</p>
<p><var>to</var>: the position at which to stop copying. Default: <code>length(<var>array</var>)</code>, the end. If negative, add <code>length(<var>text</var>)</code>.</p>
<p>If, after adjustment, <var>from</var> and <var>to</var> are not valid integers in the proper range, then it fails. <var>from</var> must be positive and less than or equal to <var>to</var>. <var>to</var> must be less than or equal to <code>length(<var>array</var>)</code>.</p>
<pre>set my_text: &quot;miskatonic&quot;
text(my_text, 0, 3)        # &quot;mis&quot;        # the first 3
text(my_text, 3, 6)        # &quot;kat&quot;        # from 3 to 6
text(my_text, 5)           # &quot;tonic&quot;      # exclude the first 5
text(my_text, 0, -4)       # &quot;miskat&quot;     # exclude the last 4
text(my_text, -3)          # &quot;nic&quot;        # the last 3
text(my_text, 0, 0)        # &quot;&quot;
text(my_text, 10)          # &quot;&quot;
text(my_text, 11)          # fail
text(my_text, 2, 1)        # fail
</pre>
<h2 align="left" id="sensory">Sensory Functions</h2>
<p align="left">The sensory functions end with <code>?</code><small>question mark</small>. They always return a logical.</p>
<h4 id="actor?">actor?(<var>value</var>)</h4>
<p>Is this an actor?</p>
<pre>actor?(@)          # true
actor?("actor")    # false
</pre>
<h4 id="array?">array?(<var>value</var>)</h4>
<p>Is this an array? If the operand is an array, the result is <code>true</code>.
    Otherwise, the result is <code>false</code>.</p>
<pre>array?(0)                              # false
array?({})                             # false
array?([])                             # true
not(array?([]))                        # false
array?(&para; (1- {letter digit &quot;_-%&quot;}))    # false
array?(null)                           # false
array?(&quot;array&quot;)                        # false</pre>
<h4 id="blob?"> blob?(<var>value</var>)</h4>
<p>Is this a blob?  If the operand is a
    blob, the result is <code>true</code>. Otherwise, the result
    is <code>false</code>.</p>
<pre>blob?(0)        # false
blob?(&quot;blob&quot;)   # false
blob?(blob())   # true</pre>
<h4 id="character?"> character?(<var>value</var>)</h4>
<p>Is this a character? If the operand is a text with a <code>length</code> of 1, then the result is <code>true</code>. Otherwise, the result is <code>false</code>.</p>
<pre>character?(1)            # false
character?(&quot;1&quot;)          # true
character?(&quot;character&quot;)  # false
character?(&quot;&quot;)           # false
character?(&quot;\u{FFFE}&quot;)   # true
character?()             # false
character?(«"»)          # true
character?(null)         # false</pre>
<h4 id="data?">data?(<var>value</var>)</h4>
<p>Is this data? If the operand is a text, number,  logical, array, blob, or record, then the result is <code>true</code>.
    If the operand is a function, pattern, or <code>null</code>, the result is <code>false</code>.</p>
<pre>data?(0)           # true
data?(&quot;&quot;)          # true
data?([&quot;0&quot;])       # true
data?({})          # true
data?(null)        # false</pre>
<h4 id="digit?"> digit?(<var>value</var>)</h4>
<p>Is this a digit? If the operand is a text with a <code>length</code> of 1 and is one of the 10 digit characters, then the result is <code>true</code>.
    Otherwise, the result is <code>false</code>.</p>
<pre>digit?(0)           # false
digit?(&quot;0&quot;)         # true
digit?(&quot;9&quot;)         # true
digit?(&quot;09&quot;)        # false
digit?(&quot;digit&quot;)     # false
digit?(&quot;&quot;)          # false
digit?(1)           # false
digit?([&quot;0&quot;])       # false
digit?(&quot;Z&quot;)         # false</pre>
<h4>fit?(<var>number</var>)</h4>
<p>Is the <var>number</var> a fit number? A number is a fit number if it is an integer that fits in 56 bits.  All fit numbers are integers in the range <code>-36028797018963968</code> thru <code>36028797018963967</code>. Only <a href="fit.html">fit</a> numbers can be given to <a href="fit.html">the <dfn>fit</dfn> functions</a>. Misty has additional integers that are too big to  fit.</p>
<h4>function?(<var>value</var>)</h4>
<p>Is this a function? If the operand is a function, then the result is <code>true</code>. Otherwise, the result is <code>false</code>.</p>
<pre>function?(0)                # false
function?(ƒ () (null))      # true
function?(&quot;function&quot;)       # false
function?(null)             # false
function?(function?)        # true</pre>
<h4 id="integer?">integer?(<var>value</var>)</h4>
<p>Is this an integer? If the operand is a number and if its fraction part
    is zero, then the result is <code>true</code>. Otherwise, the result is <code>false</code>.</p>
<pre>integer?(0)                    # true
integer?(13 / 4)               # false
integer?(16 / 4)               # true
integer?(65.0000000)           # true
integer?(65.0000001)           # false
integer?(null)                 # false
integer?(true)                 # false
integer?(1)                    # true
integer?(36028797018963968)    # true
integer?(1.00001e100)          # true</pre>
<h4>letter?(<var>value</var>)</h4>
<p>Is this a letter? If the operand is a text with a <code>length</code> of 1 and is a
    letter, then the result is <code>true</code>. Otherwise, the result is <code>false</code>.</p>
<pre>letter?(0)          # false
letter?(&quot;0&quot;)        # false
letter?(&quot;letter&quot;)   # false
letter?(&quot;l&quot;)        # true
letter?(&quot;L&quot;)        # true
letter?(&quot;&quot;)         # false
letter?(null)       # false</pre>

<h4 id="boolean?"> logical?(<var>value</var>)</h4>
<p>Is this a logical? A logical is either a <code>false</code> or a <code>true</code>. All other values are not logical.</p>
<pre>logical?(false)    # true
logical?(true)     # true
logical?(0)        # false
logical?()         # false
logical?(null)     # false</pre>
<h4> lower?(<var>value</var>)</h4>
<p>Is this a lower case letter? If the operand is a text with a <code>length</code> of 1 and is a lower case letter, then the result is <code>true</code>. Otherwise,
    the result is <code>false</code>.</p>
<pre>lower?(0)         # false
lower?(&quot;0&quot;)       # false
lower?(&quot;lower&quot;)   # false
lower?(&quot;l&quot;)       # true
lower?(&quot;L&quot;)       # false
lower?(&quot;&quot;)        # false</pre>
<h4>number?(<var>value</var>)</h4>
<p>Is this a number? If the operand is a number, then the result is <code>true</code>.
    Otherwise, the result is <code>false</code>.</p>
<pre>number?(0)           # true
number?((13 / 4))    # true
number?((13 / 0))    # false
number?(98.6)        # true
number?(&quot;0&quot;)         # false
number?(1)           # true
</pre>
<h4>record?(<var>value</var>)</h4>
<p>Is this a record? If the operand is a record, then the result is <code>true</code>.
    Otherwise, the result is <code>false</code>.</p>
<pre>record?(0)                              # false
record?({})                             # true
record?([])                             # false
record?(&quot;record&quot;)                       # false
record?(&quot;{}&quot;)                           # false
record?(ƒ () ({}))                      # false
record?(&para; (1- {letter digit &quot;_-%&quot;}))    # true</pre>
<h4>stone?(<var>value</var>)</h4>
<p>Is this stone? If the <var>value</var> is immutable, then the result is <code>true</code>.
    Otherwise, the result is <code>false</code>. All logicals, numbers, texts,
    functions, and patterns are immutable. Objects, blobs, and arrays are initially mutable,
    but can be made immutable with the <a href="#stone"><code>stone</code> function</a>.</p>
<pre>stone?(0)             # true
stone?(&quot;0&quot;)           # true
stone?([])            # false
stone?({})            # false
stone?(stone([]))     # true
stone?(stone({}))     # true
stone?(null)          # true
</pre>
<h4>text?(<var>value</var>)</h4>
<p>Is this a text? If the operand is a text, then the result is <code>true</code>.
    Otherwise, the result is <code>false</code>.</p>
<pre>text?(0)           # false
text?(&quot;0&quot;)         # true
text?(&quot;number&quot;)    # true
text?(&quot;&quot;)          # true
text?(null)        # false</pre>
<h4>upper?(<var>value</var>)</h4>
<p>Is this an upper case letter? If the operand is a text with a <code>length</code> of 1 and is an upper case letter, then the result is <code>true</code>. Otherwise,
    the result is <code>false</code>.</p>
<pre>upper?(0)          # false
upper?(&quot;0&quot;)        # false
upper?(&quot;UPPER&quot;)    # false
upper?(&quot;u&quot;)        # false
upper?(&quot;U&quot;)        # true
upper?(&quot;&quot;)         # false</pre>
<h4>whitespace?(<var>value</var>)</h4>
<p>Is this whitespace? If the operand is a nonempty text containing only whitespace characters, then the result is <code>true</code>. Otherwise,
    the result is <code>false</code>.</p>
<pre>whitespace?(0)          # false
whitespace?(32)         # false
whitespace?(char(32))   # true
whitespace?(&quot;0&quot;)        # false
whitespace?(&quot; &quot;)        # true
whitespace?(&quot;\t&quot;)       # true
whitespace?(&quot;\r&quot;)       # true
whitespace?(&quot;\r\n&quot;)     # true
whitespace?(&quot;space&quot;)    # false
whitespace?(&quot;     &quot;)    # true
whitespace?(&quot; L&quot;)       # false
whitespace?(&quot;&quot;)         # false</pre>
<h2 align="left" id="standard">Standard Functions</h2>
<h4 id="abs">abs(<var>number</var>)</h4>
<p>Absolute value. Return the positive form of the number. If the argument is not a number, the result is <code>null</code>.</p>
<h4 id="ceiling">ceiling(<var>number</var>, <var>place</var>)</h4>
<p>If <var>place</var> is <code>0</code> or <code>null</code>, the <var>number</var> is rounded up to the smallest integer that is greater than or equal to the
    <var>number</var>. If <var>place</var> is a small positive integer, then the <var>number</var> is rounded up to that  decimal place. </p>
<p>Examples:</p>
<pre>set result: ceiling(12.3775, 0)      # result is 13
set result: ceiling(12.3775, -2)     # result is 12.38
set result: ceiling(-12.3775)        # result is -12
set result: ceiling(-12.3775, -2)    # result is -12.37
set result: ceiling(-12.3775)        # result is -13</pre>
<h4 id="character">character(<var>value</var>)</h4>
<p>If the <var>value</var> is a text, it returns the first character. If the <var>value</var> is a non-negative 32-bit integer, it returns the character from that codepoint. Otherwise, it returns the empty string. </p>
<h4 id="codepoint">codepoint(<var>text</var>)</h4>
<p>The <code>codepoint</code> function returns the first codepoint in a <var>text</var> as a number. If the argument is not a text, or if it is the empty text, then it returns <code>null</code>.</p>
<h4 id="extract">extract(<var>text</var>, <var>pattern</var>, <var>from</var>, <var>to</var>)</h4>
<p>The <var>text</var> is matched to the <var>pattern</var>. If it does not match, the result is <code>null</code>. If the <var>pattern</var> does match, then the result is a record containing the saved fields.</p>
<h4 id="filter">filter(<var>array</var>, <var>function</var>)</h4>
<p> The <code>filter</code> function calls a <var>function</var> for every
    element in the <var>array</var>, passing each element as the argument.
    When the <var>function</var>'s return value is <code>true</code>, then the element
    is copied into a new array. If the <var>function</var>'s return value is <code>false</code>, then the element is not copied into the new array. If the return value is not a logical, then the filter fails.</p>
<p>It returns a new array. The <code>length</code> of the new array is between
    0 and the <code>length</code> of this <var>array</var>. It fails if the <var>function</var> parameter is not a function.</p>
<p>Example:</p>
<pre>def data: [0, 1.25, 2, 3.5, 4, 5.75]
def integers: filter(data, integer?)    # integers is [0, 2, 4]</pre>
<h4 id="floor">floor(<var>number</var>, <var>place</var>)</h4>
<p>If <var>place</var> is <code>0</code> or <code>null</code>, the <var>number</var> is rounded down to the greatest integer that is less than or equal to
    the <var>number</var>. If <var>place</var> is a small positive integer, then the <var>number</var> is rounded down to that many decimal place. For positive
    numbers, this is like discarding decimal place.</p>
<p>Examples:</p>
<pre>set result: floor(12.3775)         # result is 12
set result: floor(12.3775, -2)     # result is 12.37
set result: floor(-12.3775, 0)     # result is -13
set result: floor(-12.3775, -2)    # result is -12.38</pre>
<h4 id="format">format(<var>text</var>, <var>collection</var>, <var>transformer</var>, <var>begin</var>, <var>end</var>)</h4>
<p>The <code>format</code> function makes a new text with substitutions
    in an original <var>text</var>. A <var>collection</var> is either an array of
texts or a record of texts. The optional <var>begin</var> and <var>end</var> are texts; the defaults are <code>&quot;{&quot;</code> and <code>&quot;}&quot;</code>.</p>
<p>A search is made for the <var>begin</var> and <var>end</var> in the <var>text</var>.
    If they are found, the middle text between them is examined. If the <var>collection</var> is an array, the middle text is used as a number, and then the matched <var>begin</var> and middle and <var>end</var> are replaced with the text
    at that subscript in the array. If the collection is a record, and if
    the middle text is the key of a member of the <var>collection</var> with
    a text value, then the value of the member is used in the substitution.
    Unmatched text is not altered. </p>
<p>The text between <var>begin</var> and <var>end</var> will be broken on
    the <code>:</code><small>colon</small> character. The left text will
    be used as a number or name to select a value from the <var>collection</var>.
    (The value need not be a text.) </p>
<p>If a <var>transformer</var> parameter is a function, then it will be
    called with the <var>collection</var><code>[</code>left text<code>]</code> and right text as parameters. If it returns a text, then the substitution
    is made.</p>
<p>If a <var>transformer</var> parameter is a record, then the right text
    will be used to select a function from the <var>transformer</var>. That
    function will be passed the value from the <var>collection</var>. If the
    return value is a text, that text will substitute. If there is no
    colon, then the empty text will be used to select the function from
    the <var>transformer</var>. If the <var>transformer</var> does not produce
    a function, or if the function does not return a text, then no replacement
    occurs. If <var>transformer</var><code>[</code>right text<code>](</code><var>collection</var><code>[</code>left
text<code>])</code> produces a text, then the substituation will be
    made.</p>
<p>If the substitution is not made, and if <var>collection</var><code>[</code>left
text<code>]</code> is a number, then the right text is used as a format
    parameter in calling <var>collection</var><code>[</code>left text<code>].text(</code>right
text<code>)</code>. If it returns a text, then the substitution is made.</p>
<p>Example:</p>
<pre>var result: format(&quot;{0} in {1}!&quot;, [&quot;Malmborg&quot;, &quot;Plano&quot;])
    # result is &quot;Malmborg in Plano!&quot;</pre>
<h4 id="fraction">fraction(<var>number</var>)</h4>
<p>The <code>fraction</code> function returns the fractional part of a number It returns <code>null</code> for non-numbers.</p>
<h4 id="integer"><code>integer(<var>number</var></code><code>)</code></h4>
<p>The <code>integer</code> function returns the integer part. It returns <code>null</code> for non-numbers.</p>
<h4 id="last">last(<var>array</var>, <var>value</var>, <var>from</var>, <var>to</var>)</h4>
<p> The <code>last</code> method searches for the last occurrence of the <var>value</var> in the <var>array</var>, starting at <var>at</var>. If the <var>at</var> parameter is <code>null</code>, the default is <code>0</code>, the first
    element. If the <var>at</var> parameter is negative, then it counts from
    the end of the <var>array</var>, <code>-1</code> being the last element. </p>
<p>It returns the index of the element matching the <var>value</var>, or <code>null</code> if it is not found. </p>
<p>Example:</p>
<pre>def list: [1, 2, 3]
def at: list.find(2)   # at is 1</pre>
<h4 id="length">length(<var>value</var>)</h4>
<table>
    <tr>
        <th scope="col">type</th>
        <th scope="col">result</th>
    </tr>
    <tr>
        <td>array</td>
        <td>number of elements</td>
    </tr>
    <tr>
        <td>blob</td>
        <td>number of bits</td>
    </tr>
    <tr>
        <td>logical</td>
        <td><code>null</code></td>
    </tr>
    <tr>
        <td>function</td>
        <td>number of named parameters</td>
    </tr>
    <tr>
        <td>number</td>
        <td><code>null</code></td>
    </tr>
    <tr>
        <td>record</td>
        <td><code>null</code></td>
    </tr>
    <tr>
        <td>text</td>
        <td>number of codepoints</td>
    </tr>
</table>
<p>Length. Find the length of an array, a blob, or a text in elements, bits, or characters. For functions, it is the arity (or maximum number of arguments). All other values produce <code>null</code>.</p>
<h4 id="lower">lower(<var>text</var>)</h4>
<p>The <code>lower</code> function returns a text in which all uppercase
    characters are converted to lowercase.</p>
<p>Example:</p>
<pre>set result: lower(&quot;Carl Hollywood&quot;)    # result is &quot;carl hollywood&quot;</pre>
<h4 id="max">max(<var>number</var>, <var>number</var>)</h4>
<p>Maximum. The result is the larger of the two numbers. If either argument is
    not a number, the result is <code>null</code>.</p>
<pre>max(3, 4)             # 4</pre>
<p><code>max</code> can be used with <code>min</code> to constrain values
    within an acceptable range.</p>
<pre>min(max(2, 3), 7)     # 3
min(max(4, 3), 7)     # 4
min(max(8, 3), 7)     # 7
max(1, null)          # null
max(null, 1)          # null</pre>
<p>To determine if a value lies between two other values, uses relational
    operators.</p>
<pre>if 3 ≤ value ≤ 7
    set in_range: true</pre>
<h4 id="min">min(<var>number</var>,<var>number</var>)</h4>
<p>Minimum. The result is the smaller of the two numbers. If either argument is
    not a number, the result is <code>null</code>.</p>
<pre>min(3, 4)            # 3</pre>
<h4>modulo(<var>dividend</var>, <var>divisor</var>)</h4>
<p>The result has the sign of the divisor. If both arguments are integers, and if the divisor is positive power of two, then it is the same as <code>and(</code><var>dividend</var><code>, </code><var>divisor</var><code> - 1)</code>.</p>
<h4>neg(<var>number</var>)</h4>
<p>Negate. Reverse the sign of a number. If the argument is not a number, the result is <code>null</code>. Note that the <code>-</code><small>minus sign</small> is not used as a prefix negation operator.</p>
<h4 id="not">not(<var>logical</var>)</h4>
<p>Not. Return the opposite logical. If the argument is not a logical, it fails.</p>
<h4 id="reduce">reduce(<var>array</var>, <var>function</var>, <var>initial</var>)</h4>
<p>The <code>reduce</code> function takes a <var>function</var> that takes
    two arguments and returns a value. The <var>function</var> will be called
    for each element of the <var>array</var>, passing the result of the previous
    iteration to the next iteration. </p>
<p>The <var>inital</var> value is optional. If present, the <var>function</var> will be called for every element of the array. </p>
<p>If <var>initial</var> is <code>null</code>:</p>
<ul>
    <li>If <code>length(</code><var>array</var><code>)</code> is <code>0</code>, then it returns <code>null</code>. </li>
    <li>If <code>length(</code><var>array</var><code>)</code> is 1, then it returns <var>array</var><code>[0]</code>.</li>
    <li> If <code>length(</code><var>array</var><code>)</code> is 2, it returns <var>function</var><code>(</code><var>array</var><code>[0],</code> <var>array</var><code>[1])</code>. </li>
    <li>If <code>length(</code><var>array</var><code>)</code> is 3, it returns <var>function</var><code>(</code><var>function</var><code>(</code><var>array</var><code>[0],</code> <var>array</var><code>[1])</code>, <var>array</var><code>[2])</code>. </li>
    <li>And so on.</li>
</ul>
<p>If <var>initial</var> is not <code>null</code>:</p>
<ul>
    <li>If <code>length(</code><var>array</var><code>)</code> is <code>0</code>, then it returns <var>initial</var>. </li>
    <li>If <code>length(</code><var>array</var><code>)</code> is 1, then it returns <code><var>function</var>(<var>initial</var>, <var>array</var>[0])</code>.</li>
    <li> If <code>length(</code><var>array</var><code>)</code> is 2, it returns <var>function</var><code>(<var>function</var>(<var>initial</var>, </code><var>array</var><code>[0]), </code><var>array</var><code>[1])</code>. </li>
    <li>If <code>length(</code><var>array</var><code>)</code> is 3, it returns <var>function</var><code>(</code><var>function</var><code>(<var>function</var>(<var>initial</var>, </code><var>array</var><code>[0]), </code><var>array</var><code>[1]), </code><var>array</var><code>[2])</code>. </li>
    <li>And so on.</li>
</ul>
<p>Example:</p>
<pre>def data: [1, 2, 3, 4, 5, 6, 7, 8, 9]
def total: reduce(data, &fnof;+)      # total is 45
def product: reduce(data, &fnof;*)    # product is 362880</pre>
<h4 id="remainder">remainder(<var>dividend</var>, <var>divisor</var>)</h4>
<p>For fit integers, the remainder is <var>dividend</var><code> -((</code><var>dividend</var><code> ÷ </code><var>divisor</var><code>) * </code><var>divisor</var><code>)</code>.</p>
<h4 id="replace">replace(<var>text</var>, <var>target</var>, <var>replacement</var><code>, <var>limit</var></code>)</h4>
<p>Return a new text in which the <var>target</var> is replaced by the <var>replacement</var>.</p>
<p><var>text</var>: the source text.</p>
<p> <var>target</var>: a text or pattern that should be replaced in the source.</p>
<p> <var>replacement</var>: text to replace the matched text, or a function that takes the matched text and the starting position, and returns the replacement text or <code>null</code> if it should be left alone. </p>
<p> <var>limit</var>: The maximum number of replacements. The default is all possible replacements. The <var>limit</var> includes <code>null</code> matches.</p>
<h4 id="resolve">resolve(<var>first</var>, <var>second</var>)</h4>
<p>The <code>resolve</code> function can take two arguments. If the <var>first</var> argument is not a function, it returns the <var>first</var> argument. Otherwise, it returns the result of calling the <var>first</var> argument. If the <var>second</var> argument is an array, then its elements will be passed to the function as its arguments.</p>
<h4 id="reverse"><code>reverse(</code><code><var>array</var>)</code></h4>
<p>The <code>reverse</code> method makes a new array with the elements in the
    opposite order.</p>
<p>It returns a new, reversed array.</p>
<p>Example:</p>
<pre>def data: [&quot;I&quot;, &quot;am&quot;, &quot;Sam&quot;]
def result: reverse(data)    # the result is [&quot;Sam&quot;, &quot;am&quot;, &quot;I&quot;]</pre>
<h4 id="round"><code>round(</code><var>number<var><code>,</code></var>place</var><code>)</code></h4>
<p>If <var>place</var> is <code>0</code> or <code>null</code>, the <var>number</var> is rounded to the nearest integer. If <var>place</var> is a small integer,
    then the <var>number</var> is rounded to that many decimal place. </p>
<p>Examples:</p>
<pre>set result: round(12.3775)         # result is 12
set result: round(12.3775, -2)     # result is 12.38
set result: round(-12.3775, 0)     # result is -12
set result: round(-12.3775, -2)    # result is -12.38</pre>
<h4 id="search">search(<var>text</var>, <var>target</var>, <var>from</var>)</h4>
<p>Search the <var>text</var> for the <var>target</var>. If the <var>target</var> is found, return the character position of the left-most part of the match. If the search fails, return <code>null</code>.</p>
<p><var>text</var>: the source text.    </p>
<p><var>target</var>: a text or pattern that should be found in the source.    </p>
<p><var>from</var>: The starting position for the seach. The default is <code>0</code>, the beginning of the text. If from is negative, it is added to <code>length(</code><var>text</var><code>)</code>.</p>
<h4 id="sort">sort(<var>array</var>, <var>select</var>)</h4>
<p>The <code>sort</code> function produces a new array in which the values
    are sorted. Sort keys must be either all numbers or all texts. Any other type
    of key or any error in the key calculation will cause the sort to fail, returning <code>null</code>. The sort is ascending. The sort is stable, so the relative order of equal
    keys is preserved.</p>
<p>The optional <var>select</var> parameter determines how the sort key for each element is selected.</p>
<table cellpadding="2">
    <tr>
        <th> <var>select</var> type </th>
        <th valign="middle" nowrap>Sort key for <var>array</var><code>[</code><var>index</var><code>]</code></th>
        <th valign="middle">Description</th>
    </tr>
    <tr>
        <td><code>null</code></td>
        <td><var>array</var><code>[</code><var>index</var><code>]</code></td>
        <td>The sort key is the element itself. This is useful for sorting simple arrays
            of numbers or texts.</td>
    </tr>
    <tr>
        <td>text</td>
        <td><var>array</var><code>[</code><var>index</var><code>]</code><code>[</code><var>select</var><code>]</code></td>
        <td>The sort key is the <var>select</var> field of each record element.
            This is useful for sorting arrays of records.</td>
    </tr>
    <tr>
        <td>number</td>
        <td><var>array</var><code>[</code><var>index</var><code>]</code><code>[</code><var>select</var><code>]</code></td>
        <td>The sort key is the <var>select</var> element of each array element. This is useful
            for sorting arrays of arrays.</td>
    </tr>
    <tr>
        <td>array</td>
        <td><var>select</var><code>[</code><var>index</var><code>]</code></td>
        <td><var>select</var> is a parallel array containing the sort keys.</td>
    </tr>
</table>
<p style="clear: both;">It returns a new, sorted array.</p>
<p>Examples:</p>
<pre>def foods: [&quot;oats&quot;, &quot;peas&quot;, &quot;beans&quot;, &quot;barley&quot;]
def result: sort(foods)    # result is [&quot;barley&quot;, &quot;beans&quot;, &quot;oats&quot;, &quot;peas&quot;]

var stooges: [
    {first: &quot;Moe&quot;, last: &quot;Howard&quot;}
    {first: &quot;Joe&quot;, last: &quot;DeRita&quot;}
    {first: &quot;Shemp&quot;, last: &quot;Howard&quot;}
    {first: &quot;Larry&quot;, last: &quot;Fine&quot;}
    {first: &quot;Joe&quot;, last: &quot;Besser&quot;}
    {first: &quot;Curly&quot;, last: &quot;Howard&quot;}
]
set stooges: sort(sort(stooges, &quot;first&quot;), &quot;last&quot;)
    # stooges is now [
    #     {first: &quot;Joe&quot;, last: &quot;Besser&quot;}
    #     {first: &quot;Joe&quot;, last: &quot;DeRita&quot;}
    #     {first: &quot;Larry&quot;, last: &quot;Fine&quot;}
    #     {first: &quot;Curly&quot;, last: &quot;Howard&quot;}
    #     {first: &quot;Moe&quot;, last: &quot;Howard&quot;}
    #     {first: &quot;Shemp&quot;, last: &quot;Howard&quot;}
    # ]
set stooges: sort(stooges, [50, 60, 20, 40, 10, 30])
    # stooges is now [
    #     {first: &quot;Moe&quot;, last: &quot;Howard&quot;}
    #     {first: &quot;Larry&quot;, last: &quot;Fine&quot;}
    #     {first: &quot;Shemp&quot;, last: &quot;Howard&quot;}
    #     {first: &quot;Curly&quot;, last: &quot;Howard&quot;}
    #     {first: &quot;Joe&quot;, last: &quot;Besser&quot;}
    #     {first: &quot;Joe&quot;, last: &quot;DeRita&quot;}
    # ]</pre>
<h4 id=stone>stone(<var>value</var>)</h4>
<p>Turn an object to stone. Make the <var>value</var> immutable. It returns the immutable object.</p>
<p>The <code>stone</code> function makes an <var>value</var> (such as a blob, array, or record) immutable. If a <var>value</var> contains other objects, then they will also be turned to stone. Objects that are already stone are not changed. It returns the <var>value</var>.</p>
<h4 id="trim">trim(<var>text</var>, <var>reject</var>)</h4>
<p>The <code>trim</code> function removes selected characters from the ends of a <var>text</var>. The default is to remove control characters and spaces. </p>
<pre>set result: &quot;  Hello   there   &quot;.trim()    # result is &quot;Hello   there&quot;</pre>
<h4 id="trunc">trunc(<var>number</var>, <var>place</var>)</h4>
<p>The <var>number</var> will be truncated toward zero. If the <var>number</var> is positive, the result is the same as <var></var><code>floor(</code><var>place</var><code>)</code>.
    If the <var>number</var> is negative, the result is the same as <var></var><code>ceiling(</code><var>place</var><code>)</code>. </p>
<p>If <var>place</var> is a small integer, then the <var>number</var> is rounded
    down to that many decimal place. This is like discarding decimal places.</p>
<p>Examples:</p>
<pre>set result: trunc(12.3775, 0)     # result is 12
set result: trunc(12.3775, 2)     # result is 12.37
set result: trunc(-12.3775)       # result is -12
set result: trunc(-12.3775, 2)    # result is -12.37</pre>
<h4 id="turkish_lower">turkish_lower(<var>text</var>)</h4>
<p>Similar to <code>lower</code>, except that <code>I</code> goes to <code>&inodot;</code><small>dotless i</small>.</p>
<h4 id="turkish_upper">turkish_upper(<var>text</var>)</h4>
<p>Similar to <code>upper</code>, except that <code>i</code> goes to <code>&Idot;</code><small>I dot</small>.</p>
<h4 id="upper">upper(<var>text</var>)</h4>
<p>The <code>upper</code> function returns a text in which all lowercase characters
    are converted to uppercase.</p>
<p>Example:</p>
<pre>set result: upper(&quot;Carl Hollywood&quot;)    # result is &quot;CARL HOLLYWOOD&quot;</pre>
</body></html>
